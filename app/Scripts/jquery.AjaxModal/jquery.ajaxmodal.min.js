!function(a){a.fn.AjaxModal=function(b){function d(){a(".AjaxModal-overlay, #ajax-modal").fadeOut(c.fadeOutDuration,function(){a(".AjaxModal-overlay").remove(),a("#ajax-modal").empty()})}function e(b,d){var e="";d&&(e=d),a("#ajax-modal").html('<div class="AjaxModal-top">'+e+'<span class="AjaxModal-close">'+c.closeButton+'</div></div><div class="AjaxModal-content">'+b+"</div>"),a("#ajax-modal").css("width",c.modalWidth),a("#ajax-modal").fadeIn(c.fadeInDuration),a("body").append('<div class="AjaxModal-overlay"></div>'),a(".AjaxModal-overlay").css("opacity",c.overlayOpacity),a(".AjaxModal-overlay").hide(),a(".AjaxModal-overlay").fadeIn(c.fadeInDuration)}function f(){a("body").append('<div class="AjaxModal-modal" id="ajax-modal"></div>'),a("#ajax-modal").hide()}function g(b,c,d,f){a.ajax({url:c,type:b,data:d,success:function(a){e(a,f)}})}f();var c=a.extend({modalWidth:"50%",fadeInDuration:300,fadeOutDuration:300,overlayOpacity:.3,closeButton:"&times;",dismissable:!0},b);this.bind("click.AjaxModal",function(b){var c=a(this.form);if(c.length){var d=a(this).data("title"),e=a(c).attr("action"),f=a(c).attr("method"),h=a(c).serialize();g(f,e,h,d)}else{var d=a(this).data("title"),e=a(this).attr("href");g("GET",e,null,d)}return!1}),a("body").on("click",".AjaxModal-close",function(){d()}),a("body").on("click",".AjaxModal-overlay",function(){c.dismissable&&d()}),a(document).keyup(function(a){27==a.keyCode&&c.dismissable&&d()})}}(jQuery);